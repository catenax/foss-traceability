
# Introduction and Goals

### Purpose/ description

Supply chains in the automotive industry consist of different stakeholders spread across several geographical locations. Supply chains often lack transparency and responsiveness due to their inherent complexity and high focus on data protection in a highly competitive market. However, authorities such as the Federal Motor Transport Authority in Germany or the National Highway Traffic Safety Administration in the USA require complete traceability of components. This is particularly important for the identification of faulty components in recalls. In most cases, affected components have to be identified in manual examinations under several million vehicles in a short period of time, which leads to high costs and risks. This is solved by the introduction of the PartChain system. An organization involved in the PartChain can monitor and track the journey of its products' life cycle. Along the entire supply chain data is generated. At each point of the product lifecycle the responsibilities and the ownership of a product are clear so that parts can be located at any point in time. Errors and damages can be surveyed, usual points of error/bottlenecks can be identified and remedied. At any point of time, permitted participants can change individual parts (e.g. part is “ok” / “nok”) via the user interface of the application. In the future, in the case of damage or dysfunction, alerts can be set off and forwarded to each concerned entity to step in or manage the occurrence accordingly.


|Product vision statement   |The aim of PartChain is to map the supply chain of an OEM including suppliers and sub-suppliers, which form a network. The solution should increase transparency, interoperability and create high Levels of trust in the complete supply network. Together with a tier 1 supplier, the integration, performance, and benefits of different technologies for use in supply chain management - especially for component traceability - are to be analyzed and evaluated.
|:----------|:-------------|


### Overview
PartChain addresses its participants´ problem of having multiple interfaces and a landscape of heterogeneous systems inside their own as well as in co-operating companies. This issue leads to vast inefficiencies and uncertainty of data propriety. PartChain is a system aiming to create a network of unambiguous information and data flow between an OEM and its suppliers. It is a distributed ledger system that embodies a single source of truth for all participants of the supply chain. In particular, PartChain is designed to interconnect companies that work together in a digital platform environment. The system design offers a high level of flexibility for onboarding or offboarding companies to the ecosystem in order to meet the main business requirement of adding and removing member to / from the ecosystem. Each participating organization has their own admins and users that can access and change data in accordance with their internal and external rights and roles. PartChain is holistically managed by an engineering team that creates and updates all used microservices and maintains all further architectural elements of the system.


## Functional specification

#### System dependecies
The software has a layered architecture based on various microservices for every organization, which are e.g. the User Interface, Data Integration Service. Additionally, the services IPS-Q Gateway, Connector are used as supporting microservices and enabling services for monitoring, logging and access control are integrated in the Kubernetes cluster.
There are two kinds of dependencies for this solution:

(1.) External Dependencies:

* Database (e.g. IPS-Q )
* In the future dependencies with other organizations or network members can rise exponentially

(2.) Internal Dependencies
* Software is dependent on the Kubernetes Cluster
* Further environment dependencies (e.g. Grafana, Kibana)
* Microservices may have internal dependencies (e.g. library parent, library child)

For all development related dependencies, these can be found in the following way:
* Java application: pom.xml → in root folder
* JavaScript and Angular: package.json → in root folder

Dependencies Managers:
* Java → Maven
* JavaScript → Yarn

#### Main Components
* PartChainAEMS 
  * https://github.com/catenax/foss-traceability/tree/main/aems
* PartCahinLAAPI
  * https://github.com/catenax/foss-traceability/tree/main/laapi
* PartChainDIS
  * https://github.com/catenax/foss-traceability/tree/main/dis
* PartChain Webpp
  * https://github.com/catenax/foss-traceability/tree/main/webapp


## Non-functional requirements
This section describes in detail which non-functional requirements need to be met to guarantee a successful use of the PartChain ecosystem. This includes assumptions and constraints, as well as information about the systems efficiency, reliability, safety, usability, performance, portability (e.g. to other platforms), quantity structure and modifialability / maintainability.

### Assumptions and constraints
Beside the functional requirements which describe the assumed minimal functionality for a successful use of the PartChain ecosystem, there is a set of non-functional aspects.

#### Supplier network
* Suppliers and sub-suppliers can change. The system has to be flexible to these changes regarding functional aspects, but also in the context of performance and security etc.
* A n-tiers supplier network needs to be implemented.
* Every supplier can have no, one or many sub-suppliers.
* Every sub-supplier can be a supplier of different parties of higher (and also of different) tiers.

#### Onboarding:
* New suppliers or sub-suppliers can enter the ecosystem. An onboarding process needs to be part of a solution for these new members of the ecosystem.
* There are some preconditions for the successful onboarding of a new member in the PartChain network:
    * Commitment to defined visibility concept
    * Process for identification of components in a unique way (concept for serial numbers)
    * Electronic data recording of produced components
    * Ability to establish a Kubernetes cluster in the cloud: e.g. Google Kubernetes Engine, Azur Kubernetes Service, AWS Elastic Kubernetes Service
    * Skillset of employees to operate dockerized software components on Kubernetes
    * Right to create trusted certificates

#### Offboarding:
* Suppliers or sub-suppliers of an OEM may leave the ecosystem. An offboarding process is required to remove these parties from the ecosystem. Offboarded parties should not be able to access data of the PartChain as soon as they leave the ecosystem.

### Security:
* Security must also be ensured if a company which is part of the ecosystem does not act as expected regarding security. One example might be illegitimate transfer of keys.
* Visibility rules need to be automatically populated within the onboarding process of new members. It must be ensured that no access beyond the defined and permitted one is possible at any time.
* The system must be robust against external attacks.
* Visibility rules (see Compliance requirements below) need to be defined to secure only authorized data access.
  
#### Availability
* The system needs to be available without any unplanned down-times

#### Technology of suppliers
* Suppliers or sub-suppliers will have different internal IT systems. The data integration may differ for every supplier

#### Uniqueness
* Every party needs to ensure that their own parts have unique IDs.
* The PartChain system must if two different supplier have the same ID for one of their parts.

#### Quantity of parts and transactions
* See below in quantity structure 

### Non-functional requirements
The non-functional requirements have to follow the quality criteria below:

* BINDING - Only requirements with the word "must" ( or " must not / must not exceed" ) are binding.
* UNAMBIGUOUS - The requirement must be easy to understand by the requirement receiver and may only allow for a single interpretation.
* INDIVISIBILITY - The requirement may not be split into further requirements.
* FEASIBILITY - It must be possible to implement the requirement.
* NECESSITY - The requirement describes what is technically necessary.
* SOLUTION NEUTRALITY - The requirement should not unnecessarily restrict the design space of the requirement receiver and may not contain any action orders.
* MEASURABILITY - The implementation of the requirement must be determined based on measurement criteria. References and comparisons always need a reference point.
* COMPLETENESS - The requirements must be completely viewed from the requirement receivers perspective and may not include assumptions.
* CONSISTENCY - The requirements may not include contradictions.
  
The non-functional requirements are grouped in following categories:

* Efficiency
* Reliability
* Safety
* Usability
* Performance
* Portability (e.g. to other platforms)
* Quantity structure 
* Modifialability / maintainability

### Efficiency
Since requirement for the implementation of the PartChain system is a cloud solution, the system can be implemented in Microsoft Azure/AWS/Cloud and deployed in a Kubernetes cluster. 

* Scalability of the solution
* Accessibility from the web
* PaaS and SaaS are used whenever possible (e.g. Azure Kubernetes Service)
* Development tools are offered by the providers (e.g. Azure DevOps)
* Pay-per-use payment structure
* No own infrastructure is required and must be maintained

Moreover, the architecture is designed to avoid vendor lock-in and enable provider changes.

### Reliability
The system should be up and running without unplanned outages. 

### Safety
* The PartChain ecosystem is only accessible for authorized persons of organizations which are members of the ecosystem.
* Access to any service is only possible for users having the according permissions.
* Data access needs to comply with the defined visibility concept.
* Data coming from a production database to be written in the ledger is also only accessible for permissioned users as defined in the visibility concept.
* Microservices mistrust each other and JWTs are required for successful requests.
* There are three main types of user which are Engineering Team Members, Organization Administrators and Organization Users, having different roles and permissions within the system.

### Usability
The PartChain systems is easy to use by offering an User Interface with an familiarized design.
The User Interface is structured into a dashboard showing functionalities as tiles and a burger menu with general functionalities like logout or showing system information, etc.. The detailed description of all functionalities can be found in the user handbook. Moreover, the PartChain UI is responsive so that all devices which have internet access and an installed browser are able to access and utilize the User Interface without any problems in its complete functionality. The recommended browser is Google Chrome.

### Performance
There are no specific performance requirements, for some information on possible amounts of data going through the system, please have a look at Quantity Structure below.


### Portability (e.g. to other platforms)
For the PartChain system no real vendor lock-in exists. Using Kubernetes and Docker decreases lock-in effects and enables a relatively easy portability of the solution from one cloud vendor to another. One aspect of implementation which needs to be considered for changing the provider is the collection of log-data of Cloud Events (e.g. Azure Events).

### Modifialability / maintainability
From an administrative and engineering perspective, the PartChain system is implemented with a high degree of automation regarding builds and deployments. Moreover, it meets the requirement of onboarding new organizations or offboarding organizations, which leave the ecosystem. These processes fulfill a high degree of flexibility by automation only a few manual steps required by Engineering Team Members. User management can be easily handled by the implemented Keycloak functionality. There is one Keycloak instance including all members of the ecosystem including their channel membership as defined in the visibility concept.

Modifications of environment in the sense of onboarding new members in the ecosystem require strict compliance with this visibility concept.
