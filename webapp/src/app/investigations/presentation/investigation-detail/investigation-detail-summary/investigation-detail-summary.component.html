<!--
  ~ Copyright 2021 The PartChain Authors. All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="bg-white p-4 min-size">
  <header class="summary-header">
    <h4>Investigations details</h4>
  </header>

  <section class="mt-6">
    <p class="small-text">Description</p>
    <p class="regular-text mt-2" *ngIf="investigation.description; else noDescription">
      {{ investigation.description }}
    </p>
    <ng-template #noDescription>
      <p class="small-text mt-2 text-dustyGrayShadeAlto">
        {{ 'No description provided' }}
      </p>
    </ng-template>
  </section>

  <section class="summary-second-section">
    <div class="summary-second-section__creator">
      <p class="small-text">Requested by</p>
      <span class="flex flex-row mt-2">
        <app-avatar
          [color]="investigation.avatar.color"
          [name]="investigation.avatar.name"
          [size]="'1.5rem'"
        ></app-avatar>
        <p class="regular-text py-0.5 px-1">{{ investigation.originCompany }}</p>
      </span>
    </div>
    <div class="summary-second-section__date">
      <div class="flex flex-row">
        <section class="mr-6">
          <p class="small-text">Requested date</p>
          <p class="regular-text mt-2">
            {{ investigation.timestamp | appDateSplit }}
          </p>
        </section>
        <section>
          <p class="small-text">Status</p>
          <div class="flex flex-row mt-2 items-center">
            <svg height="13" width="13">
              <circle cx="4.5" cy="4.5" r="4.5" class="active" />
            </svg>
            <ng-container *ngIf="this.status$ | async as status; else noStatus">
              <p class="regular-text">
                {{ status | firstLetterToUpperCase }}
              </p>
            </ng-container>

            <ng-template #noStatus>
              <p></p>
            </ng-template>
          </div>
        </section>
      </div>
    </div>
  </section>
</div>
